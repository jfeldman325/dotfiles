add_newline = true
format="""
â•­â”€$container$username@$hostname\\\\$localip\\\\($kubernetes):$directory $git_branch 
â”‚ 1P ${custom.op_status} [Status:](underline bold blue) $memory_usageâš¡${custom.cpu_usage_low}${custom.cpu_usage_high} GPU:${custom.gpu_usage} GPU Mem:${custom.gpu_memory_usage}
â•°â”€$timeâ”€â”€$character 
"""

[custom.op_status]
command="if (op account get > /dev/null);then echo ğŸ”“; else echo ğŸ”’;fi"
when=true
format = "[$output](white)"

[custom.cpu_usage_low]
command="mpstat  | grep all | awk '{print 100-$13}'"
when="mpstat  | grep all | awk 'BEGIN {exit ((100-$12) <= 25.0)}'"
format = "[$output](white)"

[custom.cpu_usage_high]
command="mpstat  | grep all | awk '{print 100-$13}'"
when="mpstat  | grep all | awk 'BEGIN {exit ((100-$12) >= 25.0)}'"
format = "[$output](bold red)"

[custom.gpu_usage]
command="nvidia-smi -q --display=UTILIZATION | grep Gpu | awk '{print $3}'"
when=true
format= "[$output/100](bold green)"

[custom.gpu_memory_usage]
command="echo $(nvidia-smi -q --display=MEMORY | grep FB -A 5 | grep Used | awk '{print $3}')/$(nvidia-smi -q --display=MEMORY | grep FB -A 5 | grep Total | awk '{print $3}')MB"
when=true
format= "[$output](bold green)"

[kubernetes]
format = "[$context](white):[$namespace](red)"
disabled = false

[time]
use_12hr=true
format='ğŸŒ[$time](white)'
time_format="%I:%M%p-%A %B %d %Y"
utc_time_offset = "-5"
disabled = false

[username]
style_user = "white bold"
style_root = "red bold"
format = "[$user]($style)"
disabled = false
show_always = true

[memory_usage]
disabled=false
threshold=0
format="$symbol[${ram}( \\\\| ${swap})]($style)"

[directory]
format = "[$path]($style)[$read_only]($read_only_style)"

# \uFE0E forces character to display as unicode glyph not emoji
read_only = "ğŸ”’\uFE0E"

[localip]
ssh_only=false
format = "[$localipv4](bold blue)"
disabled = false

[hostname]
ssh_only = false
format = "[$hostname](bold red)"

[character]
success_symbol = "[â¤](bold green)"
error_symbol = "[âœ—](bold red) "
vicmd_symbol = "[Â«](bold green)"
